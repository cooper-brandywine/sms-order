<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Ordering with Venmo QR Code</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .menu-item {
      cursor: pointer;
      margin: 10px 0;
    }
    .hidden {
      display: none;
    }
    #qrcode {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Menu</h1>
  <div class="menu">
    <div class="menu-item" data-item="Burger" data-price="5.99">üçî Burger - $5.99</div>
    <div class="menu-item" data-item="Pizza" data-price="8.99">üçï Pizza - $8.99</div>
    <div class="menu-item" data-item="Salad" data-price="4.99">ü•ó Salad - $4.99</div>
  </div>

  <h2>Your Order</h2>
  <ul id="order-list"></ul>

  <div id="qrcode" class="hidden"></div>

  <button id="place-order" class="hidden">Place Order</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    const menuItems = document.querySelectorAll('.menu-item');
    const orderList = document.getElementById('order-list');
    const placeOrderButton = document.getElementById('place-order');
    const qrCodeContainer = document.getElementById('qrcode');

    let order = [];
    let totalPrice = 0;

    // Add item to the order
    menuItems.forEach(item => {
      item.addEventListener('click', () => {
        const itemName = item.dataset.item;
        const itemPrice = parseFloat(item.dataset.price);

        order.push({ name: itemName, price: itemPrice });
        totalPrice += itemPrice;

        renderOrder();
        generateQrCode();
        placeOrderButton.classList.remove('hidden');
        qrCodeContainer.classList.remove('hidden');
      });
    });

    // Render the order list
    function renderOrder() {
      orderList.innerHTML = '';
      order.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.name} - $${item.price.toFixed(2)}`;
        orderList.appendChild(li);
      });

      // Add total price at the end
      const totalLi = document.createElement('li');
      totalLi.textContent = `Total: $${totalPrice.toFixed(2)}`;
      totalLi.style.fontWeight = 'bold';
      orderList.appendChild(totalLi);
    }

    // Generate Venmo QR Code
    function generateQrCode() {
      const venmoUsername = 'your-venmo-username'; // Replace with your Venmo username
       // Create a detailed note from the order
      const detailedNote = order
        .map(item => `${item.name} ($${item.price.toFixed(2)})`)
        .join(', ');
      const note = encodeURIComponent(`Order: ${detailedNote}`);

      const venmoLink = `venmo://paycharge?txn=pay&recipients=${venmoUsername}&amount=${totalPrice.toFixed(2)}&note=${note}`;

      // Clear previous QR code
      qrCodeContainer.innerHTML = '';

      // Generate new QR code
      new QRCode(qrCodeContainer, {
        text: venmoLink,
        width: 128,
        height: 128,
      });
    }

    // Place Order functionality
    placeOrderButton.addEventListener('click', () => {
      const venmoUsername = 'rustyshackleford'; // Replace with your Venmo username
        // Create a detailed note from the order
      const detailedNote = order
        .map(item => `${item.name} ($${item.price.toFixed(2)})`)
        .join(', ');
      const note = encodeURIComponent(`Order: ${detailedNote}`);

      const venmoLink = `venmo://paycharge?txn=pay&recipients=${venmoUsername}&amount=${totalPrice.toFixed(2)}&note=${note}`;
      
      // Redirect to Venmo
      window.location.href = venmoLink;
    });
  </script>
</body>
</html>
